<!-- pages/admin/admin.wxml -->
<view class="container">
  <view class="admin-header">
    <text class="admin-title">管理员后台</text>
    <button class="btn btn-danger logout-btn" bindtap="logout">退出登录</button>
  </view>

  <view class="admin-actions">
    <button class="btn btn-primary" bindtap="addGoods">添加商品</button>
  </view>
  
  <view class="goods-list">
    <view class="goods-item" wx:for="{{goodsList}}" wx:key="id">
      <view class="goods-basic-info">
        <text class="goods-name">{{item.name}}</text>
        <text class="goods-price">¥{{item.price}}</text>
      </view>
      
      <view class="goods-stock-info">
        <text class="goods-stock">库存: {{item.stock}}</text>
        <text class="goods-status {{item.status === 'online' ? 'status-online' : 'status-offline'}}">
          {{item.status === 'online' ? '上架中' : '已下架'}}
        </text>
      </view>
      
      <view class="goods-actions">
        <button class="btn btn-warning" size="mini" bindtap="editGoods" data-id="{{item.id}}">编辑</button>
        <button 
          class="btn {{item.status === 'online' ? 'btn-danger' : 'btn-success'}}" 
          size="mini"
          bindtap="toggleStatus" 
          data-id="{{item.id}}"
        >
          {{item.status === 'online' ? '下架' : '上架'}}
        </button>
        <button class="btn btn-danger" size="mini" bindtap="deleteGoods" data-id="{{item.id}}">删除</button>
      </view>
    </view>
  </view>
</view>

<!-- 编辑/添加商品弹窗 -->
<view wx:if="{{showEditModal}}" class="modal">
  <view class="modal-content">
    <view class="modal-header">
      <text>{{editingGoods.id ? '编辑商品' : '添加商品'}}</text>
      <text class="close-btn" bindtap="closeModal">×</text>
    </view>
    
    <view class="form-item">
      <text class="label">商品名称:</text>
      <input class="input" value="{{editingGoods.name}}" bindinput="onNameInput" placeholder="请输入商品名称"/>
    </view>
    
    <view class="form-item">
      <text class="label">商品描述:</text>
      <textarea class="textarea" value="{{editingGoods.description}}" bindinput="onDescInput" placeholder="请输入商品描述"/>
    </view>
    
    <view class="form-item">
      <text class="label">价格:</text>
      <input class="input" value="{{editingGoods.price}}" bindinput="onPriceInput" placeholder="请输入价格"/>
    </view>
    
    <view class="form-item">
      <text class="label">库存:</text>
      <input class="input" value="{{editingGoods.stock}}" bindinput="onStockInput" placeholder="请输入库存数量"/>
    </view>
    
    <view class="form-item">
      <text class="label">图片链接:</text>
      <input class="input" value="{{editingGoods.image}}" bindinput="onImageInput" placeholder="请输入图片链接"/>
    </view>
    
    <view class="modal-footer">
      <button class="btn btn-primary" bindtap="saveGoods">保存</button>
      <button class="btn btn-danger" bindtap="closeModal">取消</button>
    </view>
  </view>
</view>